var C=(S,m,r)=>new Promise((l,f)=>{var t=n=>{try{u(r.next(n))}catch(c){f(c)}},p=n=>{try{u(r.throw(n))}catch(c){f(c)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(t,p);u((r=r.apply(S,m)).next())});import{d as N,f as w,r as $,c as A,u as e,Z as P,_ as U,q as F,z as L,l as s,a8 as o,E as v,a0 as _,am as K,F as V}from"./vue-b9806415.js";import{u as q,a as O,b as G,L as R,_ as W}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-2ad6cda0.js";import{h as Z,aa as j,b as H,u as J}from"./index.js";import{a8 as E,w as I,a9 as Q,B as z,a4 as X,a3 as Y}from"./antd-57936705.js";const ne=N({__name:"LoginForm",setup(S){const m=X,r=Y,l=E.Item,f=I.Password,{t}=H(),{notification:p,createErrorModal:u}=J(),{prefixCls:n}=Z("login"),c=j(),{setLoginState:D,getLoginState:T}=q(),{getFormRules:B}=O(),x=w(),g=w(!1),k=w(!1),d=$({account:"TSC_Admin",password:"123456"}),{validForm:M}=G(x),b=A(()=>e(T)===R.LOGIN);function h(){return C(this,null,function*(){const y=yield M();if(y)try{g.value=!0;const a=yield c.login({password:y.password,username:"vben",mode:"none"});a&&p.success({message:t("sys.login.loginSuccessTitle"),description:`${t("sys.login.loginSuccessDesc")}: ${a.realName}`,duration:3})}catch(a){u({title:t("sys.api.errorTip"),content:a.message||t("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${n}`)||document.body})}finally{g.value=!1}})}return(y,a)=>(P(),U(V,null,[F(s(W,{class:"enter-x"},null,512),[[L,b.value]]),F(s(e(E),{class:"p-4 enter-x",model:d,rules:e(B),ref_key:"formRef",ref:x,onKeypress:K(h,["enter"])},{default:o(()=>[s(e(l),{name:"account",class:"enter-x"},{default:o(()=>[s(e(I),{size:"large",value:d.account,"onUpdate:value":a[0]||(a[0]=i=>d.account=i),placeholder:e(t)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(l),{name:"password",class:"enter-x"},{default:o(()=>[s(e(f),{size:"large",visibilityToggle:"",value:d.password,"onUpdate:value":a[1]||(a[1]=i=>d.password=i),placeholder:e(t)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(r),{class:"enter-x"},{default:o(()=>[s(e(m),{span:12},{default:o(()=>[s(e(l),null,{default:o(()=>[s(e(Q),{checked:k.value,"onUpdate:checked":a[2]||(a[2]=i=>k.value=i),size:"small"},{default:o(()=>[v(_(e(t)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(m),{span:12},{default:o(()=>[s(e(l),{style:{"text-align":"right"}},{default:o(()=>[s(e(z),{type:"link",size:"small",onClick:a[3]||(a[3]=i=>e(D)(e(R).RESET_PASSWORD))},{default:o(()=>[v(_(e(t)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(e(l),{class:"enter-x"},{default:o(()=>[s(e(z),{type:"primary",size:"large",block:"",onClick:h,loading:g.value},{default:o(()=>[v(_(e(t)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules","onKeypress"]),[[L,b.value]])],64))}});export{ne as _};
