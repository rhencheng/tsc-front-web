var xe=Object.defineProperty,We=Object.defineProperties;var He=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var Be=(e,i,o)=>i in e?xe(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o,T=(e,i)=>{for(var o in i||(i={}))ze.call(i,o)&&Be(e,o,i[o]);if(Ie)for(var o of Ie(i))Ke.call(i,o)&&Be(e,o,i[o]);return e},Ce=(e,i)=>We(e,He(i));var _=(e,i,o)=>new Promise((c,A)=>{var y=d=>{try{B(o.next(d))}catch(h){A(h)}},r=d=>{try{B(o.throw(d))}catch(h){A(h)}},B=d=>d.done?c(d.value):Promise.resolve(d.value).then(y,r);B((o=o.apply(e,i)).next())});import{c as x,u as t,d as je,G as Ue,q as Je,l as k,i as Ye,ab as Q,z as Ge,E as ce,a6 as K,Z,a7 as ee,a8 as W,$ as Xe,N as U,a0 as ue,aa as le,ae as Ze,ah as fe,g as Qe,w as ne,ao as et,n as Ae,H as Pe,h as tt,r as Ve,f as te,o as nt,_ as st,a9 as me,F as ot,ac as De,ai as pe,am as at}from"./vue-b9806415.js";import{c as Oe,N as rt,a as Te,s as it,_ as lt,h as ct,d as Le,b as ft,e as dt,f as ut}from"./BasicForm.vue_vue_type_style_index_0_lang-8c66020c.js";import{ai as Ee,t as q,y as se,aq as Re,b as mt,ar as pt,as as ht,_ as ke,z as J,at as oe,ag as de,au as H,av as ge,aw as yt,B as Me,ax as Se,ao as he,am as Ne,ay as gt,h as At}from"./index.js";import{a4 as $e,a6 as bt,a8 as _e,d as Y,k as vt,s as ae,ag as Ft,_ as wt,a3 as It}from"./antd-57936705.js";import{a as Bt}from"./index-7caba1aa.js";function Ct(e,i){return x(()=>{const o=t(e),{labelCol:c={},wrapperCol:A={}}=o.itemProps||{},{labelWidth:y,disabledLabelWidth:r}=o,{labelWidth:B,labelCol:d,wrapperCol:h,layout:V}=t(i);if(!B&&!y&&!d||r)return c.style={textAlign:"left"},{labelCol:c,wrapperCol:A};let D=y||B;const v=T(T({},d),c),F=T(T({},h),A);return D&&(D=Ee(D)?`${D}px`:D),{labelCol:T({style:{width:D}},v),wrapperCol:T({style:{width:V==="vertical"?"100%":`calc(100% - ${D})`}},F)}})}function ye(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ye(e)}const Pt=je({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:i}){const{t:o}=mt(),{schema:c,formProps:A}=Ue(e),y=Ct(c,A),r=x(()=>{const{allDefaultValues:u,formModel:l,schema:a}=e,{mergeDynamicData:p}=e.formProps;return{field:a.field,model:l,values:T(T(T({},p),u),l),schema:a}}),B=x(()=>{var I;const{schema:u,tableAction:l,formModel:a,formActionType:p}=e;let{componentProps:w={}}=u;return q(w)&&(w=(I=w({schema:u,tableAction:l,formModel:a,formActionType:p}))!=null?I:{}),u.component==="Divider"&&(w=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},w)),w}),d=x(()=>{const{disabled:u}=e.formProps,{dynamicDisabled:l}=e.schema,{disabled:a=!1}=t(B);let p=!!u||a;return se(l)&&(p=l),q(l)&&(p=l(t(r))),p});function h(){const{show:u,ifShow:l}=e.schema,{showAdvancedButton:a}=e.formProps,p=a&&se(e.isAdvanced)?e.isAdvanced:!0;let w=!0,I=!0;return se(u)&&(w=u),se(l)&&(I=l),q(u)&&(w=u(t(r))),q(l)&&(I=l(t(r))),w=w&&p,{isShow:w,isIfShow:I}}function V(){var g;const{rules:u=[],component:l,rulesMessageJoinLabel:a,label:p,dynamicRules:w,required:I}=e.schema;if(q(w))return w(t(r));let C=Y(u);const{rulesMessageJoinLabel:S}=e.formProps,E=Reflect.has(e.schema,"rulesMessageJoinLabel")?a:S,$=Te(l)+`${E?p:""}`;function n(m,b){const R=m.message||$;return b===void 0||ht(b)||Array.isArray(b)&&b.length===0||typeof b=="string"&&b.trim()===""||typeof b=="object"&&Reflect.has(b,"checked")&&Reflect.has(b,"halfChecked")&&Array.isArray(b.checked)&&Array.isArray(b.halfChecked)&&b.checked.length===0&&b.halfChecked.length===0?Promise.reject(R):Promise.resolve()}const s=q(I)?I(t(r)):I;s&&(!C||C.length===0?C=[{required:s,validator:n}]:C.findIndex(b=>Reflect.has(b,"required"))===-1&&C.push({required:s,validator:n}));const O=C.findIndex(m=>Reflect.has(m,"required")&&!Reflect.has(m,"validator"));if(O!==-1){const m=C[O],{isShow:b}=h();if(b||(m.required=!1),l){Reflect.has(m,"type")||(m.type=l==="InputNumber"?"number":"string"),m.message=m.message||$,(l.includes("Input")||l.includes("Textarea"))&&(m.whitespace=!0);const R=(g=t(B))==null?void 0:g.valueFormat;it(m,l,R)}}const f=C.findIndex(m=>m.max);return f!==-1&&!C[f].validator&&(C[f].message=C[f].message||o("component.form.maxTip",[C[f].max])),C}function D(){var b;const{renderComponentContent:u,component:l,field:a,changeEvent:p="change",valueField:w}=e.schema,I=l&&["Switch","Checkbox"].includes(l),C=`on${vt(p)}`,S={[C]:(...R)=>{const[G]=R;s[C]&&s[C](...R);const z=G?G.target:null,M=z?I?z.checked:z.value:G;e.setFormModel(a,M,e.schema)}},E=Oe.get(l),{autoSetPlaceHolder:$,size:n}=e.formProps,s=Ce(T({allowClear:!0,getPopupContainer:R=>R.parentNode,size:n},t(B)),{disabled:t(d)});!s.disabled&&$&&l!=="RangePicker"&&l&&(s.placeholder=((b=t(B))==null?void 0:b.placeholder)||Te(l)),s.codeField=a,s.formValues=t(r);const f={[w||(I?"checked":"value")]:e.formModel[a]},g=T(T(T({},s),S),f);if(!u)return k(E,g,null);const m=q(u)?T({},u(t(r),{disabled:t(d)})):{default:()=>u};return k(E,g,ye(m)?m:{default:()=>[m]})}function v(){const{label:u,helpMessage:l,helpComponentProps:a,subLabel:p}=e.schema,w=p?k("span",null,[u,ce(" "),k("span",{class:"text-secondary"},[p])]):u,I=q(l)?l(t(r)):l;return!I||Array.isArray(I)&&I.length===0?w:k("span",null,[w,k(pt,Q({placement:"top",class:"mx-1",text:I},a),null)])}function F(){const{itemProps:u,slot:l,render:a,field:p,suffix:w,component:I}=e.schema,{labelCol:C,wrapperCol:S}=t(y),{colon:E}=e.formProps,$={disabled:t(d)};if(I==="Divider"){let n;return k($e,{span:24},{default:()=>[k(bt,t(B),ye(n=v())?n:{default:()=>[n]})]})}else{const n=()=>l?Re(i,l,t(r),$):a?a(t(r),$):D(),s=!!w,O=q(w)?w(t(r)):w;return rt.includes(I)&&e.schema&&(e.schema.itemProps=T({autoLink:!1},e.schema.itemProps)),k(_e.Item,Q({name:p,colon:E,class:{"suffix-item":s}},u,{label:v(),rules:V(),labelCol:C,wrapperCol:S}),{default:()=>[k("div",{style:"display:flex"},[k("div",{style:"flex:1;"},[n()]),s&&k("span",{class:"suffix"},[O])])]})}}return()=>{let u;const{colProps:l={},colSlot:a,renderColContent:p,component:w}=e.schema;if(!Oe.has(w))return null;const{baseColProps:I={}}=e.formProps,C=T(T({},I),l),{isIfShow:S,isShow:E}=h(),$=t(r),n={disabled:t(d)};return S&&Je(k($e,C,ye(u=(()=>a?Re(i,a,$,n):p?p($,n):F())())?u:{default:()=>[u]}),[[Ge,E]])}}});function Vt(e,i,o,c,A,y){const r=K("Button"),B=K("BasicArrow"),d=K("FormItem"),h=K("a-col");return e.showActionButtonGroup?(Z(),ee(h,fe(Q({key:0},e.actionColOpt)),{default:W(()=>[Xe("div",{style:Ze([{width:"100%"},{textAlign:e.actionColOpt.style.textAlign}])},[k(d,null,{default:W(()=>[U(e.$slots,"resetBefore"),e.showResetButton?(Z(),ee(r,Q({key:0,type:"default",class:"mr-2"},e.getResetBtnOptions,{onClick:e.resetAction}),{default:W(()=>[ce(ue(e.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):le("",!0),U(e.$slots,"submitBefore"),e.showSubmitButton?(Z(),ee(r,Q({key:1,type:"primary",class:"mr-2"},e.getSubmitBtnOptions),{default:W(()=>[ce(ue(e.getSubmitBtnOptions.text),1)]),_:1},16)):le("",!0),U(e.$slots,"advanceBefore"),e.showAdvancedButton&&!e.hideAdvanceBtn?(Z(),ee(r,{key:2,type:"link",size:"small",onClick:e.toggleAdvanced},{default:W(()=>[ce(ue(e.isAdvanced?e.t("component.form.putAway"):e.t("component.form.unfold"))+" ",1),k(B,{class:"ml-1",expand:!e.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"])):le("",!0),U(e.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):le("",!0)}const Dt=ke(lt,[["render",Vt]]);function Ot(e,i,o){const c=/^\[(.+)\]$/;if(c.test(e)){const A=e.match(c);if(A&&A[1]){const y=A[1].split(",");return i=Array.isArray(i)?i:[i],y.forEach((r,B)=>{ae(o,r.trim(),i[B])}),!0}}}function Tt(e,i,o){const c=/^\{(.+)\}$/;if(c.test(e)){const A=e.match(c);if(A&&A[1]){const y=A[1].split(",");return i=J(i)?i:{},y.forEach(r=>{ae(o,r.trim(),i[r.trim()])}),!0}}}function Rt({defaultValueRef:e,getSchema:i,formModel:o,getProps:c}){function A(d){var V,D;if(!J(d))return{};const h={};for(const v of Object.entries(d)){let[,F]=v;const[u]=v;if(!u||oe(F)&&F.length===0||q(F))continue;const l=t(c).transformDateFunc;J(F)&&(F=l==null?void 0:l(F)),oe(F)&&((V=F[0])!=null&&V.format)&&((D=F[1])!=null&&D.format)&&(F=F.map(a=>l==null?void 0:l(a))),de(F)&&(F===""?F=void 0:F=F.trim()),!Ot(u,F,h)&&!Tt(u,F,h)&&ae(h,u,F)}return y(h)}function y(d){const h=t(c).fieldMapToTime;if(!h||!Array.isArray(h))return d;for(const[V,[D,v],F="YYYY-MM-DD"]of h){if(!V||!D||!v)continue;if(!d[V]){Reflect.deleteProperty(d,V);continue}const[u,l]=d[V],[a,p]=Array.isArray(F)?F:[F,F];d[D]=r(u,a),d[v]=r(l,p),Reflect.deleteProperty(d,V)}return d}function r(d,h){return h==="timestamp"?H(d).unix():h==="timestampStartDay"?H(d).startOf("day").unix():H(d).format(h)}function B(){const d=t(i),h={};d.forEach(V=>{const{defaultValue:D,defaultValueObj:v}=V,F=Object.keys(v||{});F.length&&F.map(u=>{h[u]=v[u],o[u]===void 0&&(o[u]=v[u])}),ge(D)||(h[V.field]=D,o[V.field]===void 0&&(o[V.field]=D))}),e.value=Y(h)}return{handleFormValues:A,initDefault:B}}const X=24;function St({advanceState:e,emit:i,getProps:o,getSchema:c,formModel:A,defaultValueRef:y}){const r=Qe(),{realWidthRef:B,screenEnum:d,screenRef:h}=yt(),V=x(()=>{if(!e.isAdvanced)return 0;const a=t(o).emptySpan||0;if(Ee(a))return a;if(J(a)){const{span:p=0}=a,w=t(h);return a[w.toLowerCase()]||p||0}return 0}),D=Me(u,30);ne([()=>t(c),()=>e.isAdvanced,()=>t(B)],()=>{const{showAdvancedButton:a}=t(o);a&&D()},{immediate:!0});function v(a,p=0,w=!1){const I=t(B),C=parseInt(a.md)||parseInt(a.xs)||parseInt(a.sm)||a.span||X,S=parseInt(a.lg)||C,E=parseInt(a.xl)||S,$=parseInt(a.xxl)||E;return I<=d.LG?p+=C:I<d.XL?p+=S:I<d.XXL?p+=E:p+=$,w?(e.hideAdvanceBtn=!1,p<=X*2?(e.hideAdvanceBtn=!0,e.isAdvanced=!0):p>X*2&&p<=X*(t(o).autoAdvancedLine||3)?e.hideAdvanceBtn=!1:e.isLoad||(e.isLoad=!0,e.isAdvanced=!e.isAdvanced),{isAdvanced:e.isAdvanced,itemColSum:p}):p>X*(t(o).alwaysShowLines||1)?{isAdvanced:e.isAdvanced,itemColSum:p}:{isAdvanced:!0,itemColSum:p}}const F=et({});function u(){var I;let a=0,p=0;const{baseColProps:w={}}=t(o);for(const C of t(c)){const{show:S,colProps:E}=C;let $=!0;if(se(S)&&($=S),q(S)&&($=S({schema:C,model:A,field:C.field,values:T(T({},t(y)),A)})),$&&(E||w)){const{itemColSum:n,isAdvanced:s}=v(T(T({},w),E),a);a=n||0,s&&(p=a),F[C.field]=s}}(I=r==null?void 0:r.proxy)==null||I.$forceUpdate(),e.actionSpan=p%X+t(V),v(t(o).actionColOptions||{span:X},a,!0),i("advanced-change")}function l(){e.isAdvanced=!e.isAdvanced}return{handleToggleAdvanced:l,fieldsIsAdvancedMap:F}}function $t(e,i={}){const o=/^\[(.+)\]$/;if(o.test(e)){const c=e.match(o);if(c&&c[1]){const A=c[1].split(",");if(!A.length)return;const y=[];return A.forEach((r,B)=>{ae(y,B,i[r.trim()])}),y.filter(Boolean).length?y:void 0}}}function jt(e,i={}){const o=/^\{(.+)\}$/;if(o.test(e)){const c=e.match(o);if(c&&c[1]){const A=c[1].split(",");if(!A.length)return;const y={};return A.forEach(r=>{ae(y,r.trim(),i[r.trim()])}),Object.values(y).filter(Boolean).length?y:void 0}}}function Lt({emit:e,getProps:i,formModel:o,getSchema:c,defaultValueRef:A,formElRef:y,schemaRef:r,handleFormValues:B}){function d(){return _(this,null,function*(){const{resetFunc:n,submitOnReset:s}=t(i);n&&q(n)&&(yield n()),t(y)&&(Object.keys(o).forEach(f=>{const g=t(c).find(R=>R.field===f),m=g==null?void 0:g.defaultValueObj,b=Object.keys(m||{});b.length&&b.map(R=>{o[R]=m[R]}),o[f]=Et(g,A,f)}),Ae(()=>S()),e("reset",Pe(o)),s&&$())})}const h=()=>t(c).map(n=>[...n.fields||[],n.field]).flat(1).filter(Boolean);function V(n){return _(this,null,function*(){const s=h(),O=".",f=s.filter(m=>String(m).indexOf(O)>=0),g=[];s.forEach(m=>{const b=t(c).find(j=>j.field===m);let R=Ft(n,m);const G=Reflect.has(n,m);R=ct(b==null?void 0:b.component,R);const{componentProps:z}=b||{};let M=z;typeof z=="function"&&(M=M({formModel:t(o)}));const re=$t(m,n)||jt(m,n);if(G||re){const j=re||R;if(w(m))if(Array.isArray(j)){const P=[];for(const L of j)P.push(L?H(L):null);t(o)[m]=P}else t(o)[m]=j?M!=null&&M.valueFormat?j:H(j):null;else t(o)[m]=j;M!=null&&M.onChange&&(M==null||M.onChange(j)),g.push(m)}else f.forEach(j=>{try{const P=j.split(".").reduce((L,N)=>L[N],n);Se(P)&&(t(o)[j]=t(P),g.push(j))}catch(P){Se(A.value[j])&&(t(o)[j]=Y(t(A.value[j])))}})}),I(g).catch(m=>{})})}function D(n){return _(this,null,function*(){const s=Y(t(c));if(!n)return;let O=de(n)?[n]:n;de(n)&&(O=[n]);for(const f of O)v(f,s);r.value=s})}function v(n,s){if(de(n)){const O=s.findIndex(f=>f.field===n);O!==-1&&(delete o[n],s.splice(O,1))}}function F(n,s,O=!1){return _(this,null,function*(){const f=Y(t(c)),g=Array.isArray(n)?n.map(R=>R.field):[n.field];if(f.find(R=>g.includes(R.field))){he("There are schemas that have already been added");return}const m=f.findIndex(R=>R.field===s),b=J(n)?[n]:n;!s||m===-1||O?O?f.unshift(...b):f.push(...b):m!==-1&&f.splice(m+1,0,...b),r.value=f,a(n)})}function u(n){return _(this,null,function*(){let s=[];if(J(n)&&s.push(n),oe(n)&&(s=[...n]),!s.every(f=>f.component==="Divider"||Reflect.has(f,"field")&&f.field)){he("All children of the form Schema array that need to be updated must contain the `field` field");return}r.value=s})}function l(n){return _(this,null,function*(){let s=[];if(J(n)&&s.push(n),oe(n)&&(s=[...n]),!s.every(g=>g.component==="Divider"||Reflect.has(g,"field")&&g.field)){he("All children of the form Schema array that need to be updated must contain the `field` field");return}const f=[];t(c).forEach(g=>{let m;if(s.forEach(b=>{g.field===b.field&&(m=b)}),m!==void 0&&g.field===m.field){const b=Ne(g,m);f.push(b)}else f.push(g)}),a(f),r.value=wt(f,"field")})}function a(n){let s=[];J(n)&&s.push(n),oe(n)&&(s=[...n]);const O={},f=p();s.forEach(g=>{g.component!="Divider"&&Reflect.has(g,"field")&&g.field&&!ge(g.defaultValue)&&(!(g.field in f)||ge(f[g.field])||gt(f[g.field]))&&(O[g.field]=g.defaultValue)}),V(O)}function p(){return t(y)?B(Pe(t(o))):{}}function w(n){return t(c).some(s=>s.field===n?Le.includes(s.component):!1)}function I(n){return _(this,null,function*(){var s;return(s=t(y))==null?void 0:s.validateFields(n)})}function C(n){return _(this,null,function*(){var O;let s;return n===void 0?s=h():s=n===Array.isArray(n)?n:void 0,yield(O=t(y))==null?void 0:O.validate(s)})}function S(n){return _(this,null,function*(){var s;yield(s=t(y))==null?void 0:s.clearValidate(n)})}function E(n,s){return _(this,null,function*(){var O;yield(O=t(y))==null?void 0:O.scrollToField(n,s)})}function $(n){return _(this,null,function*(){n&&n.preventDefault();const{submitFunc:s}=t(i);if(s&&q(s)){yield s();return}if(t(y))try{const f=yield C(),g=B(f);e("submit",g)}catch(f){if((f==null?void 0:f.outOfDate)===!1&&(f!=null&&f.errorFields))return;throw new Error(f)}})}return{handleSubmit:$,clearValidate:S,validate:C,validateFields:I,getFieldsValue:p,updateSchema:l,resetSchema:u,appendSchemaByField:F,removeSchemaByField:D,resetFields:d,setFieldsValue:V,scrollToField:E}}function Et(e,i,o){let c=Y(i.value[o]);return Mt(e)?c||"":(!c&&e&&kt(e)&&(c=[0,0]),c)}function kt(e){if(e.component==="Slider"&&e.componentProps&&e.componentProps.range)return!0}function Mt(e){return(e==null?void 0:e.component)&&ft.includes(e.component)}function Nt(A){return _(this,arguments,function*({getSchema:e,getProps:i,formElRef:o,isInitedDefault:c}){tt(()=>_(this,null,function*(){if(t(c)||!t(i).autoFocusFirstItem)return;yield Ae();const y=t(e),r=t(o),B=r==null?void 0:r.$el;if(!r||!B||!y||y.length===0||!y[0].component.includes("Input"))return;const h=B.querySelector(".ant-row:first-child input");h&&(h==null||h.focus())}))})}const _t=je({name:"BasicForm",components:{FormItem:Pt,Form:_e,Row:It,FormAction:Dt},props:dt,emits:["advanced-change","reset","submit","register","field-value-change"],setup(e,{emit:i,attrs:o}){const c=Ve({}),A=Bt(),y=Ve({isAdvanced:!0,hideAdvanceBtn:!1,isLoad:!1,actionSpan:6}),r=te({}),B=te(!1),d=te({}),h=te(null),V=te(null),{prefixCls:D}=At("basic-form"),v=x(()=>T(T({},e),t(d))),F=x(()=>[D,{[`${D}--compact`]:t(v).compact}]),u=x(()=>{const{baseRowStyle:P={},rowProps:L}=t(v);return T({style:P},L)}),l=x(()=>T(T(T({},o),e),t(v))),a=x(()=>{const P=t(h)||t(v).schemas;for(const L of P){const{defaultValue:N,component:be,componentProps:ve,isHandleDateDefaultValue:qe=!0}=L;if(qe&&N&&Le.includes(be)){const ie=ve?ve.valueFormat:null;if(!Array.isArray(N))L.defaultValue=ie?H(N).format(ie):H(N);else{const Fe=[];N.forEach(we=>{Fe.push(ie?H(we).format(ie):H(we))}),L.defaultValue=Fe}}}return t(v).showAdvancedButton?Y(P.filter(L=>L.component!=="Divider")):Y(P)}),{handleToggleAdvanced:p,fieldsIsAdvancedMap:w}=St({advanceState:y,emit:i,getProps:v,getSchema:a,formModel:c,defaultValueRef:r}),{handleFormValues:I,initDefault:C}=Rt({getProps:v,defaultValueRef:r,getSchema:a,formModel:c});Nt({getSchema:a,getProps:v,isInitedDefault:B,formElRef:V});const{handleSubmit:S,setFieldsValue:E,clearValidate:$,validate:n,validateFields:s,getFieldsValue:O,updateSchema:f,resetSchema:g,appendSchemaByField:m,removeSchemaByField:b,resetFields:R,scrollToField:G}=Lt({emit:i,getProps:v,formModel:c,getSchema:a,defaultValueRef:r,formElRef:V,schemaRef:h,handleFormValues:I});ut({resetAction:R,submitAction:S}),ne(()=>t(v).model,()=>{const{model:P}=t(v);P&&E(P)},{immediate:!0}),ne(()=>t(v).schemas,P=>{g(P!=null?P:[])}),ne(()=>a.value,P=>{Ae(()=>{var L;(L=A==null?void 0:A.redoModalHeight)==null||L.call(A)}),!t(B)&&P!=null&&P.length&&(C(),B.value=!0)}),ne(()=>c,Me(()=>{t(v).submitOnChange&&S()},300),{deep:!0});function z(P){return _(this,null,function*(){d.value=Ne(t(d)||{},P)})}function M(P,L,N){c[P]=L,i("field-value-change",P,L),N&&N.itemProps&&!N.itemProps.autoLink&&s([P]).catch(be=>{})}function re(P){const{autoSubmitOnEnter:L}=t(v);if(L&&P.key==="Enter"&&P.target&&P.target instanceof HTMLElement){const N=P.target;N&&N.tagName&&N.tagName.toUpperCase()=="INPUT"&&S()}}const j={getFieldsValue:O,setFieldsValue:E,resetFields:R,updateSchema:f,resetSchema:g,setProps:z,removeSchemaByField:b,appendSchemaByField:m,clearValidate:$,validateFields:s,validate:n,submit:S,scrollToField:G};return nt(()=>{C(),i("register",j)}),T({getBindValue:l,handleToggleAdvanced:p,handleEnterPress:re,formModel:c,defaultValueRef:r,advanceState:y,getRow:u,getProps:v,formElRef:V,getSchema:a,formActionType:j,setFormModel:M,getFormClass:F,getFormActionBindProps:x(()=>T(T({},v.value),y)),fieldsIsAdvancedMap:w},j)}});function qt(e,i,o,c,A,y){const r=K("FormItem"),B=K("FormAction"),d=K("Row"),h=K("Form");return Z(),ee(h,Q(e.getBindValue,{class:e.getFormClass,ref:"formElRef",model:e.formModel,onKeypress:at(e.handleEnterPress,["enter"])}),{default:W(()=>[k(d,fe(pe(e.getRow)),{default:W(()=>[U(e.$slots,"formHeader"),(Z(!0),st(ot,null,me(e.getSchema,V=>(Z(),ee(r,{key:V.field,isAdvanced:e.fieldsIsAdvancedMap[V.field],tableAction:e.tableAction,formActionType:e.formActionType,schema:V,formProps:e.getProps,allDefaultValues:e.defaultValueRef,formModel:e.formModel,setFormModel:e.setFormModel},De({_:2},[me(Object.keys(e.$slots),D=>({name:D,fn:W(v=>[U(e.$slots,D,fe(pe(v||{})))])}))]),1032,["isAdvanced","tableAction","formActionType","schema","formProps","allDefaultValues","formModel","setFormModel"]))),128)),k(B,Q(e.getFormActionBindProps,{onToggleAdvanced:e.handleToggleAdvanced}),De({_:2},[me(["resetBefore","submitBefore","advanceBefore","advanceAfter"],V=>({name:V,fn:W(D=>[U(e.$slots,V,fe(pe(D||{})))])}))]),1040,["onToggleAdvanced"]),U(e.$slots,"formFooter")]),_:3},16)]),_:3},16,["class","model","onKeypress"])}const Jt=ke(_t,[["render",qt]]);export{Jt as B};
